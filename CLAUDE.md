# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**í”„ë¡œì íŠ¸ëª…**: ì•ˆì „í•œí•™êµ (SafeSchool)
**ëª©ì **: í•™êµí­ë ¥ ê´€ë ¨ í†µê³„ë¥¼ ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ íˆ¬ëª…í•˜ê²Œ ê³µê°œí•˜ì—¬ í•™ë¶€ëª¨ì™€ í•™ìƒì˜ ì•ˆì „í•œ í•™êµ ì„ íƒ ì§€ì›
**íƒ€ê²Ÿ ì‚¬ìš©ì**: í•™ìƒ, í•™ë¶€ëª¨
**í˜„ì¬ ë‹¨ê³„**: MVP í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì¤‘ (Mock ë°ì´í„° ê¸°ë°˜)

---

## ğŸ”§ ê°œë°œ ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
npm run start

# Lint ì‹¤í–‰
npm run lint
```

**ì¤‘ìš”**: ê°œë°œ ì„œë²„ëŠ” í¬íŠ¸ 3000ì´ ì‚¬ìš© ì¤‘ì¼ ê²½ìš° ìë™ìœ¼ë¡œ ë‹¤ìŒ í¬íŠ¸(3001, 3002 ë“±)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: Next.js 15.5.4 (App Router)
- **Language**: TypeScript 5
- **Styling**: Tailwind CSS 4.x
- **UI Components**: ì§ì ‘ êµ¬í˜„ (glassmorphism ë””ìì¸)
- **Package Manager**: npm

**ê³„íšëœ ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬** (ì•„ì§ ë¯¸ì„¤ì¹˜):
- Zustand (ìƒíƒœ ê´€ë¦¬)
- React-Leaflet (ì§€ë„)
- Recharts (ì°¨íŠ¸)
- SWR (ë°ì´í„° í˜ì¹­)
- Supabase (ë°±ì—”ë“œ/DB)

---

## ğŸ“ ì•„í‚¤í…ì²˜ ê°œìš”

### ë ˆì´ì•„ì›ƒ êµ¬ì¡°

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ **ê³ ì • ì‚¬ì´ë“œë°” + ë©”ì¸ ì»¨í…ì¸ ** ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

- **Sidebar** (`src/components/layout/Sidebar.tsx`):
  - 240px ê³ ì • ë„ˆë¹„, ì¢Œì¸¡ ê³ ì •
  - ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ íš¨ê³¼ (ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½)
  - Client Component (`'use client'`)
  - ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œë“¤ê³¼ active ìƒíƒœ ê´€ë¦¬

- **Main Content** (`src/app/layout.tsx`):
  - `margin-left: 240px`ë¡œ ì‚¬ì´ë“œë°” ì˜ì—­ í™•ë³´
  - í°ìƒ‰ ë°°ê²½ (`background-color: white`)
  - Server Component (ê¸°ë³¸)

### ìŠ¤íƒ€ì¼ë§ ì‹œìŠ¤í…œ

**globals.css**ì— ì „ì—­ ìŠ¤íƒ€ì¼ ì •ì˜:
- CSS Variablesë¡œ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ ê´€ë¦¬
- Glassmorphism ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ (`.glass-card`, `.glass-button`)
- ì•ˆì „ì§€ìˆ˜ ë°°ì§€ ìŠ¤íƒ€ì¼ (`.safety-badge-s/a/b/c/d`)
- ì• ë‹ˆë©”ì´ì…˜ (`@keyframes fadeIn`, `slideInRight`)
- ì‚¬ì´ë“œë°” ì „ìš© ìŠ¤íƒ€ì¼

**ë””ìì¸ ì›ì¹™**:
- **ì‚¬ì´ë“œë°”**: ë³´ë¼ìƒ‰ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ + ê¸€ë˜ìŠ¤ íš¨ê³¼ + í°ìƒ‰ í…ìŠ¤íŠ¸
- **ë©”ì¸ ì»¨í…ì¸ **: í°ìƒ‰ ë°°ê²½ + ê²€ì€ìƒ‰ ê³„ì—´ í…ìŠ¤íŠ¸
- **ì¹´ë“œ**: ì—°í•œ íŒŒìŠ¤í…” ë¸”ë£¨ ê·¸ë¼ë°ì´ì…˜ í…Œë‘ë¦¬ + ë¯¸ë¬˜í•œ ê·¸ë¦¼ì
- **ê°„ê²©**: `gap-8` ê¸°ë³¸ ì‚¬ìš© (2rem)

### Next.js 15 ì£¼ì˜ì‚¬í•­

1. **Server Componentsê°€ ê¸°ë³¸**: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Server Component
2. **`'use client'` í•„ìš” ì¡°ê±´**:
   - `useState`, `useEffect` ë“± React hooks ì‚¬ìš© ì‹œ
   - `onClick`, `onChange` ë“± ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‚¬ìš© ì‹œ
   - `usePathname`, `useRouter` ë“± Next.js navigation hooks ì‚¬ìš© ì‹œ
3. **styled-jsx ì‚¬ìš© ê¸ˆì§€**: Server Componentì—ì„œ styled-jsxëŠ” ì‘ë™í•˜ì§€ ì•ŠìŒ. ëŒ€ì‹  globals.css ë˜ëŠ” Tailwind ì‚¬ìš©

### íŒŒì¼ ê²½ë¡œ ë¬¸ì œ

**í•œê¸€ ê²½ë¡œ + Turbopack ë²„ê·¸**: íŒŒì¼ ê²½ë¡œì— í•œê¸€ì´ í¬í•¨ëœ ê²½ìš° Turbopack ì‚¬ìš© ì‹œ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°œìƒ.
**í•´ê²° ë°©ë²•**: `package.json`ì—ì„œ `--turbopack` í”Œë˜ê·¸ ì œê±° (ì´ë¯¸ ì ìš©ë¨)

---

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ

### ìƒ‰ìƒ íŒ”ë ˆíŠ¸

```css
/* ì•ˆì „ì§€ìˆ˜ ìƒ‰ìƒ */
--color-safe-excellent: #A8E6CF  /* Së“±ê¸‰ - ë¯¼íŠ¸ ê·¸ë¦° */
--color-safe-good: #93C5FD       /* Aë“±ê¸‰ - íŒŒìŠ¤í…” ë¸”ë£¨ */
--color-safe-average: #FDE68A    /* Bë“±ê¸‰ - ë…¸ë€ìƒ‰ */
--color-safe-warning: #FDBA74    /* Cë“±ê¸‰ - ì˜¤ë Œì§€ */
--color-safe-danger: #FCA5A5     /* Dë“±ê¸‰ - ë¹¨ê°• */

/* ì‚¬ì´ë“œë°” ë°°ê²½ */
linear-gradient(135deg, #667eea 0%, #764ba2 100%)

/* ë©”ì¸ ì»¨í…ì¸  ë°°ê²½ */
background-color: white
```

### íƒ€ì´í¬ê·¸ë˜í”¼ í´ë˜ìŠ¤

```tsx
/* í—¤ë” */
className="text-4xl font-bold text-gray-900"

/* ë³¸ë¬¸ */
className="text-gray-600"

/* ë¼ë²¨ */
className="text-blue-700 font-medium"

/* ì¹´ë“œ ì œëª© */
className="text-2xl font-bold text-gray-900"
```

### ì»´í¬ë„ŒíŠ¸ íŒ¨í„´

**Glass Card** (ì—°í•œ ë¸”ë£¨ í…Œë‘ë¦¬):
```tsx
<div className="glass-card p-6">
  {/* content */}
</div>
```

**Safety Badge**:
```tsx
<div className="safety-badge-a">Aë“±ê¸‰</div>
```

**Quick Menu Button**:
```tsx
<button className="w-full p-4 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border border-blue-200 rounded-xl text-left flex items-center justify-between transition-all">
  {/* content */}
</button>
```

---

## ğŸ“ í˜„ì¬ íŒŒì¼ êµ¬ì¡°

```
safe-school/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # Root Layout (ì‚¬ì´ë“œë°” í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ page.tsx            # ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ globals.css         # ì „ì—­ ìŠ¤íƒ€ì¼ (ë””ìì¸ ì‹œìŠ¤í…œ)
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ layout/
â”‚           â””â”€â”€ Sidebar.tsx     # ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ ì‚¬ì´ë“œë°”
â”œâ”€â”€ public/                     # ì •ì  íŒŒì¼
â”œâ”€â”€ next.config.ts              # Next.js ì„¤ì •
â”œâ”€â”€ tsconfig.json               # TypeScript ì„¤ì •
â”œâ”€â”€ package.json                # ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ CLAUDE.md                   # ì´ íŒŒì¼
```

**ì•„ì§ êµ¬í˜„ ì•ˆ ë¨**:
- `/search` - í•™êµ ê²€ìƒ‰ í˜ì´ì§€
- `/nearby` - ë‚´ ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰
- `/statistics` - ì§€ì—­ë³„ í†µê³„
- `/compare` - í•™êµ ë¹„êµ
- API Routes
- Supabase ì—°ë™
- ì§€ë„ ì»´í¬ë„ŒíŠ¸
- ìƒíƒœ ê´€ë¦¬

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ (ê³„íš)

### 1. ì•ˆì „ì§€ìˆ˜ ê³„ì‚°
```
ì•ˆì „ì§€ìˆ˜ = (A Ã— 30%) + (B Ã— 30%) + (C Ã— 25%) + (D Ã— 15%)

A: í•™êµí­ë ¥ ì˜ˆë°©êµìœ¡ ì‹¤ì  ì ìˆ˜
B: í•™êµí­ë ¥ ë°œìƒ ê±´ìˆ˜ ì—­ì ìˆ˜ (ë‚®ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜)
C: ìƒë‹´ ì‹¤ì  ì ìˆ˜
D: ìì²´í•´ê²° ë¹„ìœ¨ ì ìˆ˜

ë“±ê¸‰: S(90+), A(80-89), B(60-79), C(40-59), D(0-39)
```

### 2. ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰ (ê³„íš)
- PostGIS ê³µê°„ ì¿¼ë¦¬ ì‚¬ìš© (`ST_DWithin`)
- ë°˜ê²½ ì„¤ì •: 1km, 3km, 5km, 10km
- ì§€ë„ì— í•™êµ ë§ˆì»¤ í‘œì‹œ (ì•ˆì „ì§€ìˆ˜ ìƒ‰ìƒ êµ¬ë¶„)

### 3. í•™êµ ë¹„êµ (ê³„íš)
- ìµœëŒ€ 3ê°œ í•™êµ ë™ì‹œ ë¹„êµ
- ë ˆì´ë” ì°¨íŠ¸ë¡œ ì‹œê°í™”

---

## ğŸ’¡ ê°œë°œ ì‹œ ì£¼ì˜ì‚¬í•­

1. **Server vs Client Component**:
   - ì¸í„°ë™í‹°ë¸Œ ê¸°ëŠ¥ í•„ìš” ì‹œ `'use client'` ì¶”ê°€
   - ê°€ëŠ¥í•œ Server Component ìœ ì§€ (ì„±ëŠ¥ ìµœì í™”)

2. **ìŠ¤íƒ€ì¼ë§ ê·œì¹™**:
   - ì‚¬ì´ë“œë°”: `globals.css`ì˜ `.sidebar-*` í´ë˜ìŠ¤ ì‚¬ìš©
   - ë©”ì¸ ì»¨í…ì¸ : Tailwind í´ë˜ìŠ¤ + `.glass-card` ìœ í‹¸ë¦¬í‹°
   - ì ˆëŒ€ `<style jsx>` ì‚¬ìš© ê¸ˆì§€

3. **ê°„ê²© ë° ë ˆì´ì•„ì›ƒ**:
   - ì¹´ë“œ ê°„ê²©: `gap-8` ì‚¬ìš©
   - ì„¹ì…˜ ê°„ê²©: `mb-8` ~ `mb-10`
   - íŒ¨ë”©: `p-6` (ì¹´ë“œ ë‚´ë¶€)

4. **ë°˜ì‘í˜• ë””ìì¸**:
   - ëª¨ë°”ì¼ ë¸Œë ˆì´í¬í¬ì¸íŠ¸: `768px`
   - ì‚¬ì´ë“œë°”ëŠ” ëª¨ë°”ì¼ì—ì„œ ìˆ¨ê¹€ ì²˜ë¦¬ (ì•„ì§ ë¯¸êµ¬í˜„)

5. **TypeScript**:
   - Path alias `@/*`ëŠ” `src/*`ë¡œ ë§¤í•‘ë¨
   - íƒ€ì… ì •ì˜ëŠ” ê° ì»´í¬ë„ŒíŠ¸ íŒŒì¼ ë‚´ë¶€ì— ì¸ë¼ì¸ìœ¼ë¡œ ì‘ì„±

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

í”„ë¡œì íŠ¸ ë£¨íŠ¸(ìƒìœ„ ë””ë ‰í† ë¦¬)ì— ì„¤ê³„ ë¬¸ì„œë“¤ì´ ìˆìŒ:
- `school-violence-platform-plan.md`: ì´ˆê¸° ê¸°íš
- `design/UI-Design-Final.md`: ìµœì¢… UI ë””ìì¸ ê°€ì´ë“œ
- `design/System-Architecture.md`: ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
- `design/Database-Schema.md`: DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- `design/Mock-Data.md`: Mock ë°ì´í„° ì •ì˜

---

**ë¬¸ì„œ ë²„ì „**: 2.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-01
**í˜„ì¬ ê°œë°œ ë‹¨ê³„**: MVP í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¶• ì¤‘ (ëŒ€ì‹œë³´ë“œ ì™„ë£Œ)
